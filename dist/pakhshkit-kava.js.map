{"version":3,"sources":["./kava/webpack/universalModuleDefinition","./kava/pakhshkit-kava.js","./kava/webpack/bootstrap 5352c9f319b76a130090","./kava/external {\"commonjs\":\"pakhshkit-js\",\"commonjs2\":\"pakhshkit-js\",\"amd\":\"pakhshkit-js\",\"root\":[\"VidiunPlayer\",\"core\"]}","./kava/./kava-event-model.js","./kava/./kava-model.js","./kava/./index.js","./kava/./kava.js","./kava/../node_modules/pakhshkit-js-providers/dist/pakhshkit-analytics-service.js","./kava/./kava-rate-handler.js","./kava/./kava-timer.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE_0__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","getEventModel","eventObj","model","commonModel","eventType","index","partnerId","getPartnerId","entryId","getEntryId","sessionId","getSessionId","eventIndex","getEventIndex","referrer","getReferrer","deliveryType","getDeliveryType","playbackType","getPlaybackType","clientVer","getClientVer","clientTag","getClientTag","position","getPosition","getSessionStartTime","sessionStartTime","getVS","vs","getUIConfId","uiConfId","getCustomVar1","customVar1","getCustomVar2","customVar2","getCustomVar3","customVar3","getPlaybackContext","playbackContext","getApplicationVersion","applicationVersion","eventModel","assign","value","KavaEventModel","undefined","VIEW","type","playTimeSum","getPlayTimeSum","bufferTime","getBufferTime","bufferTimeSum","getBufferTimeSum","actualBitrate","getActualBitrate","averageBitrate","getAverageBitrate","IMPRESSION","PLAY_REQUEST","PLAY","joinTime","getJoinTime","RESUME","PAUSE","REPLAY","SEEK","targetPosition","getTargetPosition","PLAY_REACHED_25_PERCENT","PLAY_REACHED_50_PERCENT","PLAY_REACHED_75_PERCENT","PLAY_REACHED_100_PERCENT","SOURCE_SELECTED","AUDIO_SELECTED","language","getLanguage","FLAVOR_SWITCH","CAPTIONS","caption","getCaption","ERROR","errorCode","getErrorCode","_classCallCheck","instance","Constructor","TypeError","KavaModel","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_kavaEventModel","updateModel","obj","NAME","VERSION","Plugin","_pakhshkitJs","_kava","Kava","registerPlugin","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_typeof","Symbol","iterator","_pakhshkitAnalyticsService","_kavaRateHandler","_kavaTimer","_kavaModel","_BasePlugin","player","config","_this","getPrototypeOf","_rateHandler","KavaRateHandler","_model","_setModelDelegates","_timer","KavaTimer","resetCounter","resetSessionCountdown","eventCounter","viewEventCountdown","_viewEventEnabled","_resetFlags","_addBindings","eventManager","destroy","removeAll","_previousCurrentTime","_isPlaying","_isFirstPlay","_isEnded","_isPaused","_isBuffering","_timePercentEvent","logger","debug","reset","_this2","_validate","_updateBufferModel","_bufferStartTime","Date","now","getModel","OVPAnalyticsService","trackEvent","serviceUrl","doHttpRequest","then","response","_updateSessionStartTimeModel","err","error","_this3","listen","Event","TICK","countCurrent","REPORT","_onReport","RESET","_resetSession","_onSourceSelected","event","_onError","FIRST_PLAY","_onFirstPlay","TRACKS_CHANGED","_setInitialTracks","PLAYING","_onPlaying","PLAYBACK_STARTED","SEEKING","_onSeeking","_onPause","ENDED","_onEnded","TIME_UPDATE","_onTimeUpdate","VIDEO_TRACK_CHANGED","_onVideoTrackChanged","AUDIO_TRACK_CHANGED","_onAudioTrackChanged","TEXT_TRACK_CHANGED","_onTextTrackChanged","PLAYER_STATE_CHANGED","_onPlayerStateChanged","rates","getTracks","Track","VIDEO","forEach","videoTrack","push","bandwidth","_getRates","activeTracks","getActiveTracks","setRates","video","setCurrent","audio","text","_updatePlayTimeSumModel","_sendAnalytics","warn","start","_getTimeDifferenceInSeconds","_firstPlayRequestTime","resume","currentTime","stop","isLive","percent","duration","PLAY_REACHED_25","PLAY_REACHED_50","PLAY_REACHED_75","PLAY_REACHED_100","payload","selectedVideoTrack","isAdaptiveBitrateEnabled","audioTrack","selectedAudioTrack","textTrack","selectedTextTrack","severity","Error","Severity","CRITICAL","code","oldState","newState","State","BUFFERING","time","viewEventsEnabled","isStopped","delta","_this4","getCurrent","getAverage","playerVersion","btoa","_getPosition","_getDeliveryType","_getPlaybackType","Number","isNaN","streamType","StreamType","PROGRESSIVE","isDvr","dvrThreshold","_logMissingParam","missingParam","BasePlugin","defaultConfig","e","t","r","default","u","a","arguments","Map","_attemptCounter","headers","service","action","Promise","_requestPromise","resolve","reject","url","Category","NETWORK","Code","MALFORMED_DATA_URI","_createXHR","XMLHttpRequest","onreadystatechange","readyState","status","JSON","parse","responseText","responseHeaders","_getResponseHeaders","_createError","BAD_SERVER_RESPONSE","open","method","retryConfig","async","timeout","performance","ontimeout","_handleError","TIMEOUT","statusText","onerror","onabort","HTTP_ERROR","setRequestHeader","send","params","getAllResponseHeaders","split","filter","toLowerCase","indexOf","maxAttempts","attempt","OVPConfiguration","cdnUrl","serviceParams","apiVersion","format","useApiCaptions","clone","category","data","getLogLevel","LogLevel","OFF","_logger","getLevel","setLevel","setLogLevel","DEBUG","INFO","TIME","WARN","useDefaults","defaultLevel","Array","isArray","slice","keys","SERVICE","PROVIDER","UNSUPPORTED_SCHEME","BAD_HTTP_STATUS","MULTIREQUEST_API_ERROR","API_RESPONSE_MISMATCH","BLOCK_ACTION","MISSING_MANDATORY_PARAMS","MISSING_PLAY_SOURCE","RECOVERABLE","hasError","objectType","message","MultiRequestResult","f","v","y","h","g","apply","concat","requests","stringify","FAILED_PARSING_REQUEST","b","success","results","result","context","filterLevel","log","info","enabledFor","invoke","timeEnd","level","setHandler","createDefaultHandler","formatter","unshift","Function","console","getTime","toString","encodeURIComponent","test","String","join","replace","param","set","getUrl","tag","RequestBuilder","_rates","rate","active","find","current","totalDuration","sum","_FakeEventTarget","_config","_clearTimeout","_stopped","_resetCounter","_eventCounter","_intervalId","setInterval","_monitor","clearInterval","dispatchEvent","FakeEvent","FakeEventTarget"],"mappings":"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","file":"pakhshkit-kava.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"pakhshkit-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"pakhshkit-js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"kava\"] = factory(require(\"pakhshkit-js\"));\n\telse\n\t\troot[\"VidiunPlayer\"] = root[\"VidiunPlayer\"] || {}, root[\"VidiunPlayer\"][\"plugins\"] = root[\"VidiunPlayer\"][\"plugins\"] || {}, root[\"VidiunPlayer\"][\"plugins\"][\"kava\"] = factory(root[\"VidiunPlayer\"][\"core\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"pakhshkit-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"pakhshkit-js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"kava\"] = factory(require(\"pakhshkit-js\"));\n\telse\n\t\troot[\"VidiunPlayer\"] = root[\"VidiunPlayer\"] || {}, root[\"VidiunPlayer\"][\"plugins\"] = root[\"VidiunPlayer\"][\"plugins\"] || {}, root[\"VidiunPlayer\"][\"plugins\"][\"kava\"] = factory(root[\"VidiunPlayer\"][\"core\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KavaEventModel = undefined;\nexports.getEventModel = getEventModel;\n\nvar _kavaModel = __webpack_require__(2);\n\nvar KavaEventModel = exports.KavaEventModel = {\n  VIEW: {\n    type: 'VIEW',\n    index: 99,\n    getEventModel: function getEventModel(model) {\n      return {\n        playTimeSum: model.getPlayTimeSum(),\n        bufferTime: model.getBufferTime(),\n        bufferTimeSum: model.getBufferTimeSum(),\n        actualBitrate: model.getActualBitrate(),\n        averageBitrate: model.getAverageBitrate()\n      };\n    }\n  },\n  IMPRESSION: {\n    type: 'IMPRESSION',\n    index: 1,\n    getEventModel: function getEventModel() {\n      return {};\n    }\n  },\n  PLAY_REQUEST: {\n    type: 'PLAY_REQUEST',\n    index: 2,\n    getEventModel: function getEventModel() {\n      return {};\n    }\n  },\n  PLAY: {\n    type: 'PLAY',\n    index: 3,\n    getEventModel: function getEventModel(model) {\n      return {\n        bufferTime: model.getBufferTime(),\n        bufferTimeSum: model.getBufferTimeSum(),\n        actualBitrate: model.getActualBitrate(),\n        joinTime: model.getJoinTime()\n      };\n    }\n  },\n  RESUME: {\n    type: 'RESUME',\n    index: 4,\n    getEventModel: function getEventModel(model) {\n      return {\n        bufferTime: model.getBufferTime(),\n        bufferTimeSum: model.getBufferTimeSum(),\n        actualBitrate: model.getActualBitrate()\n      };\n    }\n  },\n  PAUSE: {\n    type: 'PAUSE',\n    index: 33,\n    getEventModel: function getEventModel() {\n      return {};\n    }\n  },\n  REPLAY: {\n    type: 'REPLAY',\n    index: 34,\n    getEventModel: function getEventModel() {\n      return {};\n    }\n  },\n  SEEK: {\n    type: 'SEEK',\n    index: 35,\n    getEventModel: function getEventModel(model) {\n      return {\n        targetPosition: model.getTargetPosition()\n      };\n    }\n  },\n  PLAY_REACHED_25_PERCENT: {\n    type: 'PLAY_REACHED_25_PERCENT',\n    index: 11,\n    getEventModel: function getEventModel() {\n      return {};\n    }\n  },\n  PLAY_REACHED_50_PERCENT: {\n    type: 'PLAY_REACHED_50_PERCENT',\n    index: 12,\n    getEventModel: function getEventModel() {\n      return {};\n    }\n  },\n  PLAY_REACHED_75_PERCENT: {\n    type: 'PLAY_REACHED_75_PERCENT',\n    index: 13,\n    getEventModel: function getEventModel() {\n      return {};\n    }\n  },\n  PLAY_REACHED_100_PERCENT: {\n    type: 'PLAY_REACHED_100_PERCENT',\n    index: 14,\n    getEventModel: function getEventModel() {\n      return {};\n    }\n  },\n  SOURCE_SELECTED: {\n    type: 'SOURCE_SELECTED',\n    index: 39,\n    getEventModel: function getEventModel(model) {\n      return {\n        actualBitrate: model.getActualBitrate()\n      };\n    }\n  },\n  AUDIO_SELECTED: {\n    type: 'AUDIO_SELECTED',\n    index: 42,\n    getEventModel: function getEventModel(model) {\n      return {\n        language: model.getLanguage()\n      };\n    }\n  },\n  FLAVOR_SWITCH: {\n    type: 'FLAVOR_SWITCH',\n    index: 43,\n    getEventModel: function getEventModel(model) {\n      return {\n        actualBitrate: model.getActualBitrate()\n      };\n    }\n  },\n  CAPTIONS: {\n    type: 'CAPTIONS',\n    index: 38,\n    getEventModel: function getEventModel(model) {\n      return {\n        caption: model.getCaption()\n      };\n    }\n  },\n  ERROR: {\n    type: 'ERROR',\n    index: 98,\n    getEventModel: function getEventModel(model) {\n      return {\n        errorCode: model.getErrorCode()\n      };\n    }\n  }\n};\n\n/**\r\n * Gets the full event model for a certain event object including the common params.\r\n * @param {KavaEvent} eventObj - The event model.\r\n * @param {KavaModel} model - The plugin model store.\r\n * @returns {Object} - The full event model.\r\n */\n\nfunction getEventModel(eventObj, model) {\n  var commonModel = {\n    eventType: eventObj.index,\n    partnerId: model.getPartnerId(),\n    entryId: model.getEntryId(),\n    sessionId: model.getSessionId(),\n    eventIndex: model.getEventIndex(),\n    referrer: model.getReferrer(),\n    deliveryType: model.getDeliveryType(),\n    playbackType: model.getPlaybackType(),\n    clientVer: model.getClientVer(),\n    clientTag: model.getClientTag(),\n    position: model.getPosition()\n  };\n  if (model.getSessionStartTime()) {\n    commonModel.sessionStartTime = model.getSessionStartTime();\n  }\n  if (model.getVS()) {\n    commonModel.vs = model.getVS();\n  }\n  if (model.getUIConfId()) {\n    commonModel.uiConfId = model.getUIConfId();\n  }\n  if (model.getCustomVar1()) {\n    commonModel.customVar1 = model.getCustomVar1();\n  }\n  if (model.getCustomVar2()) {\n    commonModel.customVar2 = model.getCustomVar2();\n  }\n  if (model.getCustomVar3()) {\n    commonModel.customVar3 = model.getCustomVar3();\n  }\n  if (model.getPlaybackContext()) {\n    commonModel.playbackContext = model.getPlaybackContext();\n  }\n  if (model.getApplicationVersion()) {\n    commonModel.applicationVersion = model.getApplicationVersion();\n  }\n  var eventModel = eventObj.getEventModel(model);\n  return Object.assign(eventModel, commonModel);\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KavaModel = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _kavaEventModel = __webpack_require__(1);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * The KAVA model that stores data.\r\n * @constructor\r\n * @param {?Object} - Initial model.\r\n */\nvar KavaModel = function () {\n  function KavaModel(model) {\n    _classCallCheck(this, KavaModel);\n\n    if (model) {\n      this.updateModel(model);\n    }\n  }\n\n  /**\r\n   * Gets the total play time.\r\n   * @returns {number} - The play time sum.\r\n   */\n\n\n  _createClass(KavaModel, [{\n    key: 'getPlayTimeSum',\n    value: function getPlayTimeSum() {\n      return this.playTimeSum;\n    }\n\n    /**\r\n     * Gets the buffer time.\r\n     * @returns {number} - The buffer time.\r\n     */\n\n  }, {\n    key: 'getBufferTime',\n    value: function getBufferTime() {\n      return this.bufferTime;\n    }\n\n    /**\r\n     * Gets the total buffer time.\r\n     * @returns {number} - The total buffer time.\r\n     */\n\n  }, {\n    key: 'getBufferTimeSum',\n    value: function getBufferTimeSum() {\n      return this.bufferTimeSum;\n    }\n\n    /**\r\n     * Gets the join time.\r\n     * @returns {number} - The join time.\r\n     */\n\n  }, {\n    key: 'getJoinTime',\n    value: function getJoinTime() {\n      return this.joinTime;\n    }\n\n    /**\r\n     * Gets a target position\r\n     * @returns {number} - The target position.\r\n     */\n\n  }, {\n    key: 'getTargetPosition',\n    value: function getTargetPosition() {\n      return this.targetPosition;\n    }\n\n    /**\r\n     * Gets an audio language.\r\n     * @returns {string} - The audio language.\r\n     */\n\n  }, {\n    key: 'getLanguage',\n    value: function getLanguage() {\n      return this.language;\n    }\n\n    /**\r\n     * Gets a caption language.\r\n     * @returns {string} - The caption language.\r\n     */\n\n  }, {\n    key: 'getCaption',\n    value: function getCaption() {\n      return this.caption;\n    }\n\n    /**\r\n     * Gets the error code.\r\n     * @returns {number} - The error code.\r\n     */\n\n  }, {\n    key: 'getErrorCode',\n    value: function getErrorCode() {\n      return this.errorCode;\n    }\n\n    /**\r\n     * Gets the event index counter.\r\n     * @returns {number} - The event index counter.\r\n     */\n\n  }, {\n    key: 'getEventIndex',\n    value: function getEventIndex() {\n      return this.eventIndex;\n    }\n\n    /**\r\n     * Gets the session start time.\r\n     * @returns {number} - The session start time.\r\n     */\n\n  }, {\n    key: 'getSessionStartTime',\n    value: function getSessionStartTime() {\n      return this.sessionStartTime;\n    }\n\n    /**\r\n     * Updates the model.\r\n     * @param {Object} obj - A partial or full updated model.\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: 'updateModel',\n    value: function updateModel(obj) {\n      Object.assign(this, obj);\n    }\n\n    /**\r\n     * Gets the model for a certain event.\r\n     * @param {KavaEvent} eventObj - The event object.\r\n     * @returns {Object} - The event model.\r\n     */\n\n  }, {\n    key: 'getModel',\n    value: function getModel(eventObj) {\n      return (0, _kavaEventModel.getEventModel)(eventObj, this);\n    }\n  }]);\n\n  return KavaModel;\n}();\n\nexports.KavaModel = KavaModel;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NAME = exports.VERSION = exports.Plugin = undefined;\n\nvar _pakhshkitJs = __webpack_require__(0);\n\nvar _kava = __webpack_require__(4);\n\nexports.Plugin = _kava.Kava;\nexports.VERSION = \"0.2.5\";\nexports.NAME = \"pakhshkit-js-kava\";\n\n\nvar pluginName = 'kava';\n\n(0, _pakhshkitJs.registerPlugin)(pluginName, _kava.Kava);\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Kava = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pakhshkitJs = __webpack_require__(0);\n\nvar _pakhshkitAnalyticsService = __webpack_require__(5);\n\nvar _kavaEventModel = __webpack_require__(1);\n\nvar _kavaRateHandler = __webpack_require__(6);\n\nvar _kavaTimer = __webpack_require__(7);\n\nvar _kavaModel = __webpack_require__(2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * KAVA (Vidiun Advanced Analytics) plugin class.\r\n * @constructor\r\n * @param {string} name - The plugin name.\r\n * @param {Player} player - The player instance.\r\n * @param {Object} config - The plugin config.\r\n */\nvar Kava = function (_BasePlugin) {\n  _inherits(Kava, _BasePlugin);\n\n  _createClass(Kava, null, [{\n    key: 'isValid',\n\n\n    /**\r\n     * Runs the plugin validation logic.\r\n     * @type {Object}\r\n     * @static\r\n     * @return {boolean} - Whether the plugin is valid or not.\r\n     */\n    value: function isValid() {\n      return true;\n    }\n\n    /**\r\n     * The default config of the plugin.\r\n     * @type {Object}\r\n     * @static\r\n     */\n\n  }]);\n\n  function Kava(name, player, config) {\n    _classCallCheck(this, Kava);\n\n    var _this = _possibleConstructorReturn(this, (Kava.__proto__ || Object.getPrototypeOf(Kava)).call(this, name, player, config));\n\n    _this._rateHandler = new _kavaRateHandler.KavaRateHandler();\n    _this._model = new _kavaModel.KavaModel();\n    _this._setModelDelegates();\n    _this._timer = new _kavaTimer.KavaTimer({\n      resetCounter: _this.config.resetSessionCountdown,\n      eventCounter: _this.config.viewEventCountdown\n    });\n    _this._viewEventEnabled = true;\n    _this._resetFlags();\n    _this._addBindings();\n    _this._model.updateModel({\n      eventIndex: 1,\n      bufferTime: 0.0,\n      bufferTimeSum: 0.0,\n      playTimeSum: 0.0\n    });\n    return _this;\n  }\n\n  /**\r\n   * Runs the destroy logic of the plugin.\r\n   * @public\r\n   * @return {void}\r\n   */\n\n\n  _createClass(Kava, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.eventManager.destroy();\n      this._timer.destroy();\n      this._rateHandler.destroy();\n    }\n\n    /**\r\n     * Runs the reset logic of the plugin.\r\n     * @public\r\n     * @return {void}\r\n     */\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.eventManager.removeAll();\n      this._rateHandler.destroy();\n      this._timer.destroy();\n      this._resetFlags();\n      this._addBindings();\n      this._model.updateModel({\n        eventIndex: 1,\n        bufferTime: 0.0,\n        bufferTimeSum: 0.0,\n        playTimeSum: 0.0,\n        sessionStartTime: null\n      });\n    }\n  }, {\n    key: '_resetFlags',\n    value: function _resetFlags() {\n      this._previousCurrentTime = 0;\n      this._isPlaying = false;\n      this._isFirstPlay = true;\n      this._isEnded = false;\n      this._isPaused = false;\n      this._isBuffering = false;\n      this._timePercentEvent = {\n        PLAY_REACHED_25_PERCENT: false,\n        PLAY_REACHED_50_PERCENT: false,\n        PLAY_REACHED_75_PERCENT: false,\n        PLAY_REACHED_100_PERCENT: false\n      };\n    }\n  }, {\n    key: '_resetSession',\n    value: function _resetSession() {\n      this.logger.debug('Reset KAVA session');\n      this._rateHandler.reset();\n      this._model.updateModel({\n        eventIndex: 1,\n        bufferTimeSum: 0.0,\n        playTimeSum: 0.0\n      });\n    }\n  }, {\n    key: '_sendAnalytics',\n    value: function _sendAnalytics(eventObj) {\n      var _this2 = this;\n\n      if (!this._validate()) {\n        return;\n      }\n      if (this._isBuffering) {\n        this._updateBufferModel();\n        this._bufferStartTime = Date.now();\n      }\n      var model = this._model.getModel(eventObj);\n      _pakhshkitAnalyticsService.OVPAnalyticsService.trackEvent(this.config.serviceUrl, model).doHttpRequest().then(function (response) {\n        _this2.logger.debug('KAVA event sent', eventObj.type, model);\n        _this2._updateSessionStartTimeModel(response);\n      }, function (err) {\n        _this2.logger.error('Failed to send KAVA event', eventObj.type, model, err);\n      });\n      this._model.updateModel({ eventIndex: this._model.getEventIndex() + 1 });\n    }\n  }, {\n    key: '_addBindings',\n    value: function _addBindings() {\n      var _this3 = this;\n\n      this.eventManager.listen(this._timer, _kavaTimer.KavaTimer.Event.TICK, function () {\n        return _this3._rateHandler.countCurrent();\n      });\n      this.eventManager.listen(this._timer, _kavaTimer.KavaTimer.Event.REPORT, function () {\n        return _this3._onReport();\n      });\n      this.eventManager.listen(this._timer, _kavaTimer.KavaTimer.Event.RESET, function () {\n        return _this3._resetSession();\n      });\n      this.eventManager.listen(this.player, this.player.Event.SOURCE_SELECTED, function () {\n        return _this3._onSourceSelected();\n      });\n      this.eventManager.listen(this.player, this.player.Event.ERROR, function (event) {\n        return _this3._onError(event);\n      });\n      this.eventManager.listen(this.player, this.player.Event.FIRST_PLAY, function () {\n        return _this3._onFirstPlay();\n      });\n      this.eventManager.listen(this.player, this.player.Event.TRACKS_CHANGED, function () {\n        return _this3._setInitialTracks();\n      });\n      this.eventManager.listen(this.player, this.player.Event.PLAYING, function () {\n        return _this3._onPlaying();\n      });\n      this.eventManager.listen(this.player, this.player.Event.PLAYBACK_STARTED, function () {\n        return _this3._isPlaying = true;\n      });\n      this.eventManager.listen(this.player, this.player.Event.SEEKING, function () {\n        return _this3._onSeeking();\n      });\n      this.eventManager.listen(this.player, this.player.Event.PAUSE, function () {\n        return _this3._onPause();\n      });\n      this.eventManager.listen(this.player, this.player.Event.ENDED, function () {\n        return _this3._onEnded();\n      });\n      this.eventManager.listen(this.player, this.player.Event.TIME_UPDATE, function () {\n        return _this3._onTimeUpdate();\n      });\n      this.eventManager.listen(this.player, this.player.Event.VIDEO_TRACK_CHANGED, function (event) {\n        return _this3._onVideoTrackChanged(event);\n      });\n      this.eventManager.listen(this.player, this.player.Event.AUDIO_TRACK_CHANGED, function (event) {\n        return _this3._onAudioTrackChanged(event);\n      });\n      this.eventManager.listen(this.player, this.player.Event.TEXT_TRACK_CHANGED, function (event) {\n        return _this3._onTextTrackChanged(event);\n      });\n      this.eventManager.listen(this.player, this.player.Event.PLAYER_STATE_CHANGED, function (event) {\n        return _this3._onPlayerStateChanged(event);\n      });\n    }\n  }, {\n    key: '_getRates',\n    value: function _getRates() {\n      var rates = [];\n      var videoTracks = this.player.getTracks(this.player.Track.VIDEO);\n      videoTracks.forEach(function (videoTrack) {\n        return rates.push(videoTrack.bandwidth);\n      });\n      return rates;\n    }\n  }, {\n    key: '_setInitialTracks',\n    value: function _setInitialTracks() {\n      var rates = this._getRates();\n      var activeTracks = this.player.getActiveTracks();\n      this._rateHandler.setRates(rates);\n      if (activeTracks.video) {\n        this._rateHandler.setCurrent(activeTracks.video.bandwidth);\n      }\n      if (activeTracks.audio) {\n        this._model.updateModel({ language: activeTracks.audio.language });\n      }\n      if (activeTracks.text) {\n        this._model.updateModel({ caption: activeTracks.text.language });\n      }\n    }\n  }, {\n    key: '_onReport',\n    value: function _onReport() {\n      if (this._viewEventEnabled) {\n        this._updatePlayTimeSumModel();\n        this._sendAnalytics(_kavaEventModel.KavaEventModel.VIEW);\n      } else {\n        this.logger.warn('VIEW event blocked because server response of viewEventsEnabled=false');\n      }\n      this._model.updateModel({ bufferTime: 0 });\n    }\n  }, {\n    key: '_onPlaying',\n    value: function _onPlaying() {\n      if (this._isFirstPlay) {\n        this._timer.start();\n        this._isFirstPlay = false;\n        this._model.updateModel({\n          joinTime: Kava._getTimeDifferenceInSeconds(this._firstPlayRequestTime)\n        });\n        this._sendAnalytics(_kavaEventModel.KavaEventModel.PLAY);\n      } else if (this._isEnded) {\n        this._timer.start();\n        this._isEnded = false;\n        this._sendAnalytics(_kavaEventModel.KavaEventModel.REPLAY);\n      } else if (this._isPaused) {\n        this._timer.resume();\n        this._isPaused = false;\n        this._sendAnalytics(_kavaEventModel.KavaEventModel.RESUME);\n      }\n    }\n  }, {\n    key: '_onFirstPlay',\n    value: function _onFirstPlay() {\n      this._firstPlayRequestTime = Date.now();\n      this._sendAnalytics(_kavaEventModel.KavaEventModel.PLAY_REQUEST);\n    }\n  }, {\n    key: '_onSourceSelected',\n    value: function _onSourceSelected() {\n      this._sendAnalytics(_kavaEventModel.KavaEventModel.IMPRESSION);\n    }\n  }, {\n    key: '_onSeeking',\n    value: function _onSeeking() {\n      this._previousCurrentTime = this.player.currentTime;\n      this._model.updateModel({ targetPosition: this.player.currentTime });\n      this._sendAnalytics(_kavaEventModel.KavaEventModel.SEEK);\n    }\n  }, {\n    key: '_onPause',\n    value: function _onPause() {\n      this._isPaused = true;\n      this._timer.stop();\n      this._sendAnalytics(_kavaEventModel.KavaEventModel.PAUSE);\n    }\n  }, {\n    key: '_onEnded',\n    value: function _onEnded() {\n      this._isEnded = true;\n      this._onTimeUpdate();\n      this._model.updateModel({ bufferTime: 0 });\n    }\n  }, {\n    key: '_onTimeUpdate',\n    value: function _onTimeUpdate() {\n      if (!this.player.isLive()) {\n        this._updatePlayTimeSumModel();\n        var percent = this.player.currentTime / this.player.duration;\n        if (!this._timePercentEvent.PLAY_REACHED_25 && percent >= 0.25) {\n          this._timePercentEvent.PLAY_REACHED_25 = true;\n          this._sendAnalytics(_kavaEventModel.KavaEventModel.PLAY_REACHED_25_PERCENT);\n        }\n        if (!this._timePercentEvent.PLAY_REACHED_50 && percent >= 0.5) {\n          this._timePercentEvent.PLAY_REACHED_50 = true;\n          this._sendAnalytics(_kavaEventModel.KavaEventModel.PLAY_REACHED_50_PERCENT);\n        }\n        if (!this._timePercentEvent.PLAY_REACHED_75 && percent >= 0.75) {\n          this._timePercentEvent.PLAY_REACHED_75 = true;\n          this._sendAnalytics(_kavaEventModel.KavaEventModel.PLAY_REACHED_75_PERCENT);\n        }\n        if (!this._timePercentEvent.PLAY_REACHED_100 && percent === 1) {\n          this._timePercentEvent.PLAY_REACHED_100 = true;\n          this._sendAnalytics(_kavaEventModel.KavaEventModel.PLAY_REACHED_100_PERCENT);\n        }\n      }\n    }\n  }, {\n    key: '_onVideoTrackChanged',\n    value: function _onVideoTrackChanged(event) {\n      var videoTrack = event.payload.selectedVideoTrack;\n      this._rateHandler.setCurrent(videoTrack.bandwidth);\n      if (this.player.isAdaptiveBitrateEnabled()) {\n        this._sendAnalytics(_kavaEventModel.KavaEventModel.FLAVOR_SWITCH);\n      } else {\n        this._sendAnalytics(_kavaEventModel.KavaEventModel.SOURCE_SELECTED);\n      }\n    }\n  }, {\n    key: '_onAudioTrackChanged',\n    value: function _onAudioTrackChanged(event) {\n      var audioTrack = event.payload.selectedAudioTrack;\n      this._model.updateModel({ language: audioTrack.language });\n      this._sendAnalytics(_kavaEventModel.KavaEventModel.AUDIO_SELECTED);\n    }\n  }, {\n    key: '_onTextTrackChanged',\n    value: function _onTextTrackChanged(event) {\n      if (this._isPlaying) {\n        var textTrack = event.payload.selectedTextTrack;\n        this._model.updateModel({ caption: textTrack.language });\n        this._sendAnalytics(_kavaEventModel.KavaEventModel.CAPTIONS);\n      }\n    }\n  }, {\n    key: '_onError',\n    value: function _onError(event) {\n      if (event.payload && event.payload.severity === _pakhshkitJs.Error.Severity.CRITICAL) {\n        this._model.updateModel({ errorCode: event.payload.code });\n        this._sendAnalytics(_kavaEventModel.KavaEventModel.ERROR);\n        this.reset();\n      }\n    }\n  }, {\n    key: '_onPlayerStateChanged',\n    value: function _onPlayerStateChanged(event) {\n      var oldState = event.payload.oldState;\n      var newState = event.payload.newState;\n      if (oldState.type === this.player.State.BUFFERING) {\n        this._isBuffering = false;\n        this._updateBufferModel();\n      }\n      if (newState.type === this.player.State.BUFFERING) {\n        this._isBuffering = true;\n        this._bufferStartTime = Date.now();\n      }\n    }\n  }, {\n    key: '_updateSessionStartTimeModel',\n    value: function _updateSessionStartTimeModel(response) {\n      if (!this._model.getSessionStartTime() && response) {\n        if ((typeof response === 'undefined' ? 'undefined' : _typeof(response)) === 'object') {\n          this._model.updateModel({ sessionStartTime: response.time });\n          this._viewEventEnabled = response.viewEventsEnabled;\n        } else {\n          this._model.updateModel({ sessionStartTime: response });\n        }\n      }\n      if (this._timer.isStopped()) {\n        this._model.updateModel({ sessionStartTime: null });\n      }\n    }\n  }, {\n    key: '_updateBufferModel',\n    value: function _updateBufferModel() {\n      var duration = Kava._getTimeDifferenceInSeconds(this._bufferStartTime);\n      this._model.updateModel({\n        bufferTime: this._model.getBufferTime() + duration,\n        bufferTimeSum: this._model.getBufferTimeSum() + duration\n      });\n    }\n  }, {\n    key: '_updatePlayTimeSumModel',\n    value: function _updatePlayTimeSumModel() {\n      var delta = void 0;\n      if (this.player.isLive()) {\n        delta = this.config.viewEventCountdown - this._model.getBufferTime();\n      } else {\n        delta = this.player.currentTime - this._previousCurrentTime;\n        this._previousCurrentTime = this.player.currentTime;\n      }\n      this._model.updateModel({ playTimeSum: this._model.getPlayTimeSum() + delta });\n    }\n  }, {\n    key: '_setModelDelegates',\n    value: function _setModelDelegates() {\n      var _this4 = this;\n\n      this._model.getActualBitrate = function () {\n        return _this4._rateHandler.getCurrent();\n      };\n      this._model.getAverageBitrate = function () {\n        return _this4._rateHandler.getAverage();\n      };\n      this._model.getPartnerId = function () {\n        return _this4.config.partnerId;\n      };\n      this._model.getEntryId = function () {\n        return _this4.config.entryId;\n      };\n      this._model.getSessionId = function () {\n        return _this4.config.sessionId;\n      };\n      this._model.getClientVer = function () {\n        return _this4.config.playerVersion;\n      };\n      this._model.getClientTag = function () {\n        return 'html5:v' + _this4.config.playerVersion;\n      };\n      this._model.getVS = function () {\n        return _this4.config.vs;\n      };\n      this._model.getUIConfId = function () {\n        return _this4.config.uiConfId;\n      };\n      this._model.getReferrer = function () {\n        return btoa(_this4.config.referrer);\n      };\n      this._model.getCustomVar1 = function () {\n        return _this4.config.customVar1;\n      };\n      this._model.getCustomVar2 = function () {\n        return _this4.config.customVar2;\n      };\n      this._model.getCustomVar3 = function () {\n        return _this4.config.customVar3;\n      };\n      this._model.getPosition = function () {\n        return _this4._getPosition();\n      };\n      this._model.getDeliveryType = function () {\n        return _this4._getDeliveryType();\n      };\n      this._model.getPlaybackType = function () {\n        return _this4._getPlaybackType();\n      };\n      this._model.getPlaybackContext = function () {\n        return _this4.config.playbackContext;\n      };\n      this._model.getApplicationVersion = function () {\n        return _this4.config.applicationVersion;\n      };\n    }\n  }, {\n    key: '_getPosition',\n    value: function _getPosition() {\n      if (this.player.isLive()) {\n        if (!Number.isNaN(this.player.duration)) {\n          if (this.player.duration - this.player.currentTime < 1) {\n            return 0;\n          }\n          return -(this.player.duration - this.player.currentTime);\n        }\n        return 0;\n      }\n      return this.player.currentTime;\n    }\n  }, {\n    key: '_getDeliveryType',\n    value: function _getDeliveryType() {\n      if (this.player.streamType === this.player.StreamType.PROGRESSIVE) {\n        return 'url';\n      }\n      return this.player.streamType;\n    }\n  }, {\n    key: '_getPlaybackType',\n    value: function _getPlaybackType() {\n      if (this.player.isLive()) {\n        if (this.player.isDvr()) {\n          var distanceFromLiveEdge = this.player.duration - this.player.currentTime;\n          if (distanceFromLiveEdge >= this.config.dvrThreshold) {\n            return 'dvr';\n          }\n        }\n        return 'live';\n      }\n      return 'vod';\n    }\n  }, {\n    key: '_validate',\n    value: function _validate() {\n      if (!this.config.partnerId) {\n        Kava._logMissingParam('partnerId');\n        return false;\n      }\n      if (!this.config.entryId) {\n        Kava._logMissingParam('entryId');\n        return false;\n      }\n      return true;\n    }\n  }], [{\n    key: '_getTimeDifferenceInSeconds',\n    value: function _getTimeDifferenceInSeconds(time) {\n      return (Date.now() - time) / 1000.0;\n    }\n  }, {\n    key: '_logMissingParam',\n    value: function _logMissingParam(missingParam) {\n      this.logger.warn('Kava analytics block report because of missing param ' + missingParam);\n    }\n  }]);\n\n  return Kava;\n}(_pakhshkitJs.BasePlugin);\n\nKava.defaultConfig = {\n  serviceUrl: '//analytics.vidiun.com/api_v3/index.php',\n  viewEventCountdown: 10,\n  resetSessionCountdown: 30,\n  dvrThreshold: 120,\n  playbackContext: '',\n  applicationVersion: ''\n};\nexports.Kava = Kava;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){ true?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.analytics=t():(e.pakhshkit=e.pakhshkit||{},e.pakhshkit.services=e.pakhshkit.services||{},e.pakhshkit.services.analytics=t())}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=19)}([function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(2),u=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;n(this,e),this._attemptCounter=1,this.headers=t}return o(e,[{key:\"getUrl\",value:function(e){return e+\"/service/\"+this.service+(this.action?\"/action/\"+this.action:\"\")}},{key:\"doHttpRequest\",value:function(){var e=this,t=new Promise(function(t,r){e._requestPromise={resolve:t,reject:r}});return this.url||this._requestPromise.reject(new u.default(u.default.Severity.CRITICAL,u.default.Category.NETWORK,u.default.Code.MALFORMED_DATA_URI,{url:this.url})),this._createXHR(),t}},{key:\"_createXHR\",value:function(){var e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status)try{var r=JSON.parse(t.responseText);return e.responseHeaders=e._getResponseHeaders(t),e._requestPromise.resolve(r)}catch(r){e._requestPromise.reject(e._createError(t,u.default.Code.BAD_SERVER_RESPONSE,{text:t.responseText}))}},t.open(this.method,this.url,this.retryConfig.async),this.retryConfig.async&&this.retryConfig.timeout&&(t.timeout=this.retryConfig.timeout);var r=performance.now();t.ontimeout=function(){e._handleError(t,u.default.Code.TIMEOUT,{timeout:(performance.now()-r)/1e3,statusText:t.statusText})},t.onerror=t.onabort=function(){e._handleError(t,u.default.Code.HTTP_ERROR,{text:t.responseText,statusText:t.statusText})},this.headers.forEach(function(e,r){t.setRequestHeader(r,e)}),t.send(this.params)}},{key:\"_getResponseHeaders\",value:function(e){return e.getAllResponseHeaders().split(\"\\n\").filter(function(e){return 0===e.toLowerCase().indexOf(\"x-\")})}},{key:\"_handleError\",value:function(e,t,r){var n=this._createError(e,t,r);if(e.onreadystatechange=function(){},e.onerror=function(){},e.ontimeout=function(){},e.onabort=function(){},!(this.retryConfig.maxAttempts&&this._attemptCounter<this.retryConfig.maxAttempts))return this._requestPromise.reject(n);this._attemptCounter++,this._createXHR()}},{key:\"_createError\",value:function(e,t,r){return Object.assign(r,{url:this.url,headers:this._getResponseHeaders(e),attempt:this._attemptCounter}),new u.default(u.default.Severity.CRITICAL,u.default.Category.NETWORK,t,r)}}]),e}();t.default=a},function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0}),t.OVPConfiguration=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(4),u={serviceUrl:\"https://cdnapisec.vidiun.com/api_v3\",cdnUrl:\"https://cdnapisec.vidiun.com\",serviceParams:{apiVersion:\"3.3.0\",format:1},useApiCaptions:!0},a=function(){function e(){n(this,e)}return o(e,null,[{key:\"set\",value:function(e){e&&Object.assign(u,e)}},{key:\"get\",value:function(){return(0,i.clone)(u)}}]),e}();t.default=a,t.OVPConfiguration=a},function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(3),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=r(7),a=r(6),s=r(5),c=function e(t,r,i){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,e),this.severity=t,this.category=r,this.code=i,this.data=u,(0,o.getLogLevel)(\"Error\")!==o.LogLevel.OFF&&e._logger.error(\"Category:\"+r+\" | Code:\"+i+\" |\",u)};c.Severity=u.Severity,c.Category=s.Category,c.Code=a.Code,c._logger=(0,i.default)(\"Error\"),t.default=c},function(e,t,r){\"use strict\";function n(e){return e?a.get(e):a}function o(e){return n(e).getLevel()}function i(e,t){n(t).setLevel(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var u=r(10),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),s={DEBUG:a.DEBUG,INFO:a.INFO,TIME:a.TIME,WARN:a.WARN,ERROR:a.ERROR,OFF:a.OFF};a.useDefaults({defaultLevel:a.ERROR}),t.default=n,t.LogLevel=s,t.getLogLevel=o,t.setLogLevel=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=function e(t){var r=void 0;return Array.isArray(t)?(r=t.length>0?t.slice(0):[],r.forEach(function(t,o){(\"object\"===(void 0===t?\"undefined\":n(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(r[o]=e(t))})):\"object\"===(void 0===t?\"undefined\":n(t))?(r=Object.assign({},t),Object.keys(r).forEach(function(t){(\"object\"===n(r[t])&&r[t]!=={}||Array.isArray(r[t])&&r[t].length>0)&&(r[t]=e(r[t]))})):r=t,r};t.clone=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n={NETWORK:1,SERVICE:2,PROVIDER:3};t.Category=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,BAD_SERVER_RESPONSE:1005,MULTIREQUEST_API_ERROR:1006,API_RESPONSE_MISMATCH:1007,ERROR:2e3,BLOCK_ACTION:2001,MISSING_MANDATORY_PARAMS:3e3,MISSING_PLAY_SOURCE:3001};t.Code=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n={RECOVERABLE:1,CRITICAL:2};t.Severity=n},function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function e(t){n(this,e),this.hasError=!1,\"VidiunAPIException\"===t.objectType?(this.hasError=!0,this.error=new i(t.code,t.message)):t.error&&\"VidiunAPIException\"===t.error.objectType?(this.hasError=!0,this.error=new i(t.error.code,t.error.message)):this.data=t};t.default=o;var i=function e(t,r){n(this,e),this.code=t,this.message=r}},function(e,t,r){\"use strict\";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function u(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.MultiRequestResult=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),l=n(c),f=r(3),d=n(f),p=r(8),v=n(p),y=r(2),h=n(y),g=function(e){function t(){var e,r,n,o;i(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return r=n=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.requests=[],o=r,u(n,o)}return a(t,e),s(t,[{key:\"add\",value:function(e){this.requests.push(e);var t={},r={service:e.service,action:e.action};return Object.assign(t,o({},this.requests.length,Object.assign(r,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:\"execute\",value:function(){var e=this;return new Promise(function(r,n){try{e.params=JSON.stringify(e.params)}catch(r){t._logger.error(\"\"+r.message),n(new h.default(h.default.Severity.CRITICAL,h.default.Category.PROVIDER,h.default.Code.FAILED_PARSING_REQUEST,{error:r,params:e.params}))}e.doHttpRequest().then(function(t){var o=new b(t);o.success?r({headers:e.responseHeaders,response:o}):n(new h.default(h.default.Severity.CRITICAL,h.default.Category.NETWORK,h.default.Code.MULTIREQUEST_API_ERROR,{url:e.url,headers:e.responseHeaders,results:o.results}))},function(e){n(e)})})}}]),t}(l.default);g._logger=(0,d.default)(\"MultiRequestBuilder\"),t.default=g;var b=t.MultiRequestResult=function e(t){var r=this;i(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var n=new v.default(t);if(r.results.push(n),n.hasError)return e._logger.error(\"Service returned an error with error code: \"+n.error.code+\" and message: \"+n.error.message+\".\"),void(r.success=!1)})};b._logger=(0,d.default)(\"MultiRequestResult\")},function(e,t,r){var n,o;/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */\n!function(i){\"use strict\";var u={};u.VERSION=\"1.4.1\";var a,s={},c=function(e,t){return function(){return t.apply(e,arguments)}},l=function(){var e,t,r=arguments,n=r[0];for(t=1;t<r.length;t++)for(e in r[t])e in n||!r[t].hasOwnProperty(e)||(n[e]=r[t][e]);return n},f=function(e,t){return{value:e,name:t}};u.DEBUG=f(1,\"DEBUG\"),u.INFO=f(2,\"INFO\"),u.TIME=f(3,\"TIME\"),u.WARN=f(4,\"WARN\"),u.ERROR=f(8,\"ERROR\"),u.OFF=f(99,\"OFF\");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&\"value\"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(u.DEBUG,arguments)},info:function(){this.invoke(u.INFO,arguments)},warn:function(){this.invoke(u.WARN,arguments)},error:function(){this.invoke(u.ERROR,arguments)},time:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(u.TIME,[e,\"start\"])},timeEnd:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(u.TIME,[e,\"end\"])},invoke:function(e,t){a&&this.enabledFor(e)&&a(t,l({level:e},this.context))}};var p=new d({filterLevel:u.OFF});!function(){var e=u;e.enabledFor=c(p,p.enabledFor),e.debug=c(p,p.debug),e.time=c(p,p.time),e.timeEnd=c(p,p.timeEnd),e.info=c(p,p.info),e.warn=c(p,p.warn),e.error=c(p,p.error),e.log=e.info}(),u.setHandler=function(e){a=e},u.setLevel=function(e){p.setLevel(e);for(var t in s)s.hasOwnProperty(t)&&s[t].setLevel(e)},u.getLevel=function(){return p.getLevel()},u.get=function(e){return s[e]||(s[e]=new d(l({name:e},p.context)))},u.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift(\"[\"+t.name+\"]\")};var t={},r=function(e,t){Function.prototype.apply.call(e,console,t)};return\"undefined\"==typeof console?function(){}:function(n,o){n=Array.prototype.slice.call(n);var i,a=console.log;o.level===u.TIME?(i=(o.name?\"[\"+o.name+\"] \":\"\")+n[0],\"start\"===n[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):r(a,[i+\": \"+((new Date).getTime()-t[i])+\"ms\"])):(o.level===u.WARN&&console.warn?a=console.warn:o.level===u.ERROR&&console.error?a=console.error:o.level===u.INFO&&console.info?a=console.info:o.level===u.DEBUG&&console.debug&&(a=console.debug),e.formatter(n,o),r(a,n))}},u.useDefaults=function(e){u.setLevel(e&&e.defaultLevel||u.DEBUG),u.setHandler(u.createDefaultHandler(e))},n=u,void 0!==(o=\"function\"==typeof n?n.call(t,r,t,e):n)&&(e.exports=o)}()},,function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=function(e){var t=[],r=/\\[\\]$/,o=function(e){return\"[object Array]\"===Object.prototype.toString.call(e)},i=function(e,r){r=\"function\"==typeof r?r():null===r?\"\":void 0===r?\"\":r,t[t.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(r)};return function e(u,a){var s=void 0,c=void 0,l=void 0;if(u)if(o(a))for(s=0,c=a.length;s<c;s++)r.test(u)?i(u,a[s]):e(u+\":\"+(\"object\"===n(a[s])?s:\"\"),a[s]);else if(a&&\"[object Object]\"===String(a))for(l in a)e(u+\":\"+l,a[l]);else i(u,a);else if(o(a))for(s=0,c=a.length;s<c;s++)i(a[s].name,a[s].value);else for(l in a)e(l,a[l]);return t}(\"\",e).join(\"&\").replace(/%20/g,\"+\")};t.param=o},function(e,t,r){\"use strict\";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(9),a=n(u),s=r(1),c=n(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:\"getMultiRequest\",value:function(e,t,r){var n=c.default.get(),o=n.serviceParams;Object.assign(o,{vs:t,clientTag:\"html5:v\"+e}),r&&Object.assign(o,{partnerId:r});var i=new Map;i.set(\"Content-Type\",\"application/json\");var u=new a.default(i);return u.method=\"POST\",u.service=\"multirequest\",u.url=u.getUrl(n.serviceUrl),u.params=o,u}}]),e}();t.default=l},,function(e,t,r){\"use strict\";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(13),c=n(s),l=r(0),f=n(l),d=r(1),p=n(d),v=r(12),y=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,null,[{key:\"trackEvent\",value:function(e,t){var r=p.default.get(),n={};Object.assign(n,r.serviceParams,t);var o=new f.default;return o.service=\"analytics\",o.action=\"trackEvent\",o.method=\"GET\",o.tag=\"analytics-trackEvent\",o.params=n,o.url=e+\"?service=\"+o.service+\"&action=\"+o.action+\"&\"+(0,v.param)(o.params),o}}]),t}(c.default);t.default=y},,,,function(e,t,r){\"use strict\";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.VERSION=t.NAME=t.RequestBuilder=t.OVPConfiguration=t.OVPAnalyticsService=void 0;var o=r(0),i=n(o),u=r(1),a=n(u),s=r(15),c=n(s);t.OVPAnalyticsService=c.default,t.OVPConfiguration=a.default,t.RequestBuilder=i.default,t.NAME=\"pakhshkit-js-providers-analytics-service\",t.VERSION=\"2.18.1\"}])});\n//# sourceMappingURL=pakhshkit-analytics-service.js.map\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * Manage the video rates for the KAVA plugin.\r\n * @constructor\r\n */\nvar KavaRateHandler = function () {\n  function KavaRateHandler() {\n    _classCallCheck(this, KavaRateHandler);\n\n    this._rates = [];\n\n    this._rates = [];\n  }\n\n  /**\r\n   * Sets the video rates.\r\n   * @param {Array<number>} rates - The video rates.\r\n   * @public\r\n   * @returns {void}\r\n   */\n\n\n  _createClass(KavaRateHandler, [{\n    key: \"setRates\",\n    value: function setRates(rates) {\n      var _this = this;\n\n      this._rates = [];\n      rates.forEach(function (rate) {\n        _this._rates.push({\n          rate: rate,\n          active: false,\n          duration: 0\n        });\n      });\n    }\n\n    /**\r\n     * Sets the current rate.\r\n     * @param {number} rate - The current rate.\r\n     * @public\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: \"setCurrent\",\n    value: function setCurrent(rate) {\n      this._rates.forEach(function (o) {\n        return o.active = false;\n      });\n      var obj = this._rates.find(function (o) {\n        return o.rate === rate;\n      });\n      if (obj) {\n        obj.active = true;\n      }\n    }\n\n    /**\r\n     * Gets the current rate.\r\n     * @public\r\n     * @returns {number} - The current rate.\r\n     */\n\n  }, {\n    key: \"getCurrent\",\n    value: function getCurrent() {\n      var current = this._rates.find(function (o) {\n        return o.active;\n      });\n      return current ? current.rate : -1;\n    }\n\n    /**\r\n     * Increases the duration of the current rate.\r\n     * @public\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: \"countCurrent\",\n    value: function countCurrent() {\n      var current = this._rates.find(function (o) {\n        return o.active;\n      });\n      if (current) {\n        current.duration++;\n      }\n    }\n\n    /**\r\n     * Gets the average rate.\r\n     * @public\r\n     * @returns {number} - The average rate.\r\n     */\n\n  }, {\n    key: \"getAverage\",\n    value: function getAverage() {\n      var totalDuration = 0;\n      var sum = 0;\n      this._rates.forEach(function (o) {\n        sum += o.rate * o.duration;\n        totalDuration += o.duration;\n      });\n      return totalDuration ? sum / totalDuration : 0;\n    }\n\n    /**\r\n     * Resets the duration of all rates.\r\n     * @public\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._rates.forEach(function (o) {\n        return o.duration = 0;\n      });\n    }\n\n    /**\r\n     * Destroys the class.\r\n     * @public\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this._rates = [];\n    }\n  }]);\n\n  return KavaRateHandler;\n}();\n\nexports.KavaRateHandler = KavaRateHandler;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KavaTimer = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pakhshkitJs = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SECOND = 1000;\n\n/**\r\n * Mange a timer and dispatches related events.\r\n * @constructor\r\n * @param {Object} config - The timer config.\r\n */\n\nvar KavaTimer = function (_FakeEventTarget) {\n  _inherits(KavaTimer, _FakeEventTarget);\n\n  function KavaTimer(config) {\n    _classCallCheck(this, KavaTimer);\n\n    var _this = _possibleConstructorReturn(this, (KavaTimer.__proto__ || Object.getPrototypeOf(KavaTimer)).call(this));\n\n    _this._config = config;\n    return _this;\n  }\n\n  /**\r\n   * Starts the timer interval.\r\n   * @public\r\n   * @returns {void}\r\n   */\n\n\n  _createClass(KavaTimer, [{\n    key: 'start',\n    value: function start() {\n      var _this2 = this;\n\n      this._clearTimeout();\n      this._stopped = false;\n      this._resetCounter = 0;\n      this._eventCounter = 0;\n      this._intervalId = setInterval(function () {\n        return _this2._monitor();\n      }, SECOND);\n    }\n\n    /**\r\n     * Continues the timer to dispatch REPORT.\r\n     * @public\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: 'resume',\n    value: function resume() {\n      this._stopped = false;\n      this._resetCounter = 0;\n    }\n\n    /**\r\n     * Stops the timer from dispatch REPORT and starts the timer to dispatch RESET.\r\n     * @public\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this._stopped = true;\n    }\n\n    /**\r\n     * @public\r\n     * @returns {boolean} - Whether the timer is stopped.\r\n     */\n\n  }, {\n    key: 'isStopped',\n    value: function isStopped() {\n      return this._stopped;\n    }\n\n    /**\r\n     * Destroys the timer.\r\n     * @public\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._clearTimeout();\n    }\n  }, {\n    key: '_clearTimeout',\n    value: function _clearTimeout() {\n      if (this._intervalId) {\n        clearInterval(this._intervalId);\n        this._intervalId = null;\n      }\n    }\n  }, {\n    key: '_monitor',\n    value: function _monitor() {\n      if (this._stopped) {\n        if (this._resetCounter === this._config.resetCounter) {\n          this.dispatchEvent(new _pakhshkitJs.FakeEvent(KavaTimer.Event.RESET));\n          this._resetCounter = 0;\n          this._eventCounter = 0;\n        }\n        this._resetCounter++;\n      } else {\n        this.dispatchEvent(new _pakhshkitJs.FakeEvent(KavaTimer.Event.TICK));\n        if (this._eventCounter === this._config.eventCounter) {\n          this.dispatchEvent(new _pakhshkitJs.FakeEvent(KavaTimer.Event.REPORT));\n          this._eventCounter = 0;\n        }\n        this._eventCounter++;\n      }\n    }\n  }]);\n\n  return KavaTimer;\n}(_pakhshkitJs.FakeEventTarget);\n\nKavaTimer.Event = {\n  TICK: 'tick',\n  RESET: 'reset',\n  REPORT: 'report'\n};\nexports.KavaTimer = KavaTimer;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// pakhshkit-kava.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5352c9f319b76a130090","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"pakhshkit-js\",\"commonjs2\":\"pakhshkit-js\",\"amd\":\"pakhshkit-js\",\"root\":[\"VidiunPlayer\",\"core\"]}\n// module id = 0\n// module chunks = 0","// @flow\r\nimport {KavaModel} from './kava-model';\r\n\r\nexport const KavaEventModel: {[event: string]: KavaEvent} = {\r\n  VIEW: {\r\n    type: 'VIEW',\r\n    index: 99,\r\n    getEventModel: (model: KavaModel) => ({\r\n      playTimeSum: model.getPlayTimeSum(),\r\n      bufferTime: model.getBufferTime(),\r\n      bufferTimeSum: model.getBufferTimeSum(),\r\n      actualBitrate: model.getActualBitrate(),\r\n      averageBitrate: model.getAverageBitrate()\r\n    })\r\n  },\r\n  IMPRESSION: {\r\n    type: 'IMPRESSION',\r\n    index: 1,\r\n    getEventModel: () => ({})\r\n  },\r\n  PLAY_REQUEST: {\r\n    type: 'PLAY_REQUEST',\r\n    index: 2,\r\n    getEventModel: () => ({})\r\n  },\r\n  PLAY: {\r\n    type: 'PLAY',\r\n    index: 3,\r\n    getEventModel: (model: KavaModel) => ({\r\n      bufferTime: model.getBufferTime(),\r\n      bufferTimeSum: model.getBufferTimeSum(),\r\n      actualBitrate: model.getActualBitrate(),\r\n      joinTime: model.getJoinTime()\r\n    })\r\n  },\r\n  RESUME: {\r\n    type: 'RESUME',\r\n    index: 4,\r\n    getEventModel: (model: KavaModel) => ({\r\n      bufferTime: model.getBufferTime(),\r\n      bufferTimeSum: model.getBufferTimeSum(),\r\n      actualBitrate: model.getActualBitrate()\r\n    })\r\n  },\r\n  PAUSE: {\r\n    type: 'PAUSE',\r\n    index: 33,\r\n    getEventModel: () => ({})\r\n  },\r\n  REPLAY: {\r\n    type: 'REPLAY',\r\n    index: 34,\r\n    getEventModel: () => ({})\r\n  },\r\n  SEEK: {\r\n    type: 'SEEK',\r\n    index: 35,\r\n    getEventModel: (model: KavaModel) => ({\r\n      targetPosition: model.getTargetPosition()\r\n    })\r\n  },\r\n  PLAY_REACHED_25_PERCENT: {\r\n    type: 'PLAY_REACHED_25_PERCENT',\r\n    index: 11,\r\n    getEventModel: () => ({})\r\n  },\r\n  PLAY_REACHED_50_PERCENT: {\r\n    type: 'PLAY_REACHED_50_PERCENT',\r\n    index: 12,\r\n    getEventModel: () => ({})\r\n  },\r\n  PLAY_REACHED_75_PERCENT: {\r\n    type: 'PLAY_REACHED_75_PERCENT',\r\n    index: 13,\r\n    getEventModel: () => ({})\r\n  },\r\n  PLAY_REACHED_100_PERCENT: {\r\n    type: 'PLAY_REACHED_100_PERCENT',\r\n    index: 14,\r\n    getEventModel: () => ({})\r\n  },\r\n  SOURCE_SELECTED: {\r\n    type: 'SOURCE_SELECTED',\r\n    index: 39,\r\n    getEventModel: (model: KavaModel) => ({\r\n      actualBitrate: model.getActualBitrate()\r\n    })\r\n  },\r\n  AUDIO_SELECTED: {\r\n    type: 'AUDIO_SELECTED',\r\n    index: 42,\r\n    getEventModel: (model: KavaModel) => ({\r\n      language: model.getLanguage()\r\n    })\r\n  },\r\n  FLAVOR_SWITCH: {\r\n    type: 'FLAVOR_SWITCH',\r\n    index: 43,\r\n    getEventModel: (model: KavaModel) => ({\r\n      actualBitrate: model.getActualBitrate()\r\n    })\r\n  },\r\n  CAPTIONS: {\r\n    type: 'CAPTIONS',\r\n    index: 38,\r\n    getEventModel: (model: KavaModel) => ({\r\n      caption: model.getCaption()\r\n    })\r\n  },\r\n  ERROR: {\r\n    type: 'ERROR',\r\n    index: 98,\r\n    getEventModel: (model: KavaModel) => ({\r\n      errorCode: model.getErrorCode()\r\n    })\r\n  }\r\n};\r\n\r\n/**\r\n * Gets the full event model for a certain event object including the common params.\r\n * @param {KavaEvent} eventObj - The event model.\r\n * @param {KavaModel} model - The plugin model store.\r\n * @returns {Object} - The full event model.\r\n */\r\nexport function getEventModel(eventObj: KavaEvent, model: KavaModel): Object {\r\n  const commonModel: Object = {\r\n    eventType: eventObj.index,\r\n    partnerId: model.getPartnerId(),\r\n    entryId: model.getEntryId(),\r\n    sessionId: model.getSessionId(),\r\n    eventIndex: model.getEventIndex(),\r\n    referrer: model.getReferrer(),\r\n    deliveryType: model.getDeliveryType(),\r\n    playbackType: model.getPlaybackType(),\r\n    clientVer: model.getClientVer(),\r\n    clientTag: model.getClientTag(),\r\n    position: model.getPosition()\r\n  };\r\n  if (model.getSessionStartTime()) {\r\n    commonModel.sessionStartTime = model.getSessionStartTime();\r\n  }\r\n  if (model.getVS()) {\r\n    commonModel.vs = model.getVS();\r\n  }\r\n  if (model.getUIConfId()) {\r\n    commonModel.uiConfId = model.getUIConfId();\r\n  }\r\n  if (model.getCustomVar1()) {\r\n    commonModel.customVar1 = model.getCustomVar1();\r\n  }\r\n  if (model.getCustomVar2()) {\r\n    commonModel.customVar2 = model.getCustomVar2();\r\n  }\r\n  if (model.getCustomVar3()) {\r\n    commonModel.customVar3 = model.getCustomVar3();\r\n  }\r\n  if (model.getPlaybackContext()) {\r\n    commonModel.playbackContext = model.getPlaybackContext();\r\n  }\r\n  if (model.getApplicationVersion()) {\r\n    commonModel.applicationVersion = model.getApplicationVersion();\r\n  }\r\n  const eventModel = eventObj.getEventModel(model);\r\n  return Object.assign(eventModel, commonModel);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./kava-event-model.js","// @flow\r\nimport {getEventModel} from './kava-event-model';\r\n\r\n/**\r\n * The KAVA model that stores data.\r\n * @constructor\r\n * @param {?Object} - Initial model.\r\n */\r\nclass KavaModel {\r\n  sessionStartTime: number;\r\n  eventIndex: number;\r\n  playTimeSum: number;\r\n  bufferTime: number;\r\n  bufferTimeSum: number;\r\n  language: string;\r\n  caption: string;\r\n  errorCode: number;\r\n  joinTime: number;\r\n  targetPosition: number;\r\n  getActualBitrate: Function;\r\n  getAverageBitrate: Function;\r\n  getPartnerId: Function;\r\n  getEntryId: Function;\r\n  getSessionId: Function;\r\n  getClientVer: Function;\r\n  getClientTag: Function;\r\n  getVS: Function;\r\n  getUIConfId: Function;\r\n  getReferrer: Function;\r\n  getCustomVar1: Function;\r\n  getCustomVar2: Function;\r\n  getCustomVar3: Function;\r\n  getPosition: Function;\r\n  getDeliveryType: Function;\r\n  getPlaybackType: Function;\r\n  getPlaybackContext: Function;\r\n  getApplicationVersion: Function;\r\n\r\n  constructor(model?: Object) {\r\n    if (model) {\r\n      this.updateModel(model);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets the total play time.\r\n   * @returns {number} - The play time sum.\r\n   */\r\n  getPlayTimeSum(): number {\r\n    return this.playTimeSum;\r\n  }\r\n\r\n  /**\r\n   * Gets the buffer time.\r\n   * @returns {number} - The buffer time.\r\n   */\r\n  getBufferTime(): number {\r\n    return this.bufferTime;\r\n  }\r\n\r\n  /**\r\n   * Gets the total buffer time.\r\n   * @returns {number} - The total buffer time.\r\n   */\r\n  getBufferTimeSum(): number {\r\n    return this.bufferTimeSum;\r\n  }\r\n\r\n  /**\r\n   * Gets the join time.\r\n   * @returns {number} - The join time.\r\n   */\r\n  getJoinTime(): number {\r\n    return this.joinTime;\r\n  }\r\n\r\n  /**\r\n   * Gets a target position\r\n   * @returns {number} - The target position.\r\n   */\r\n  getTargetPosition(): number {\r\n    return this.targetPosition;\r\n  }\r\n\r\n  /**\r\n   * Gets an audio language.\r\n   * @returns {string} - The audio language.\r\n   */\r\n  getLanguage(): string {\r\n    return this.language;\r\n  }\r\n\r\n  /**\r\n   * Gets a caption language.\r\n   * @returns {string} - The caption language.\r\n   */\r\n  getCaption(): string {\r\n    return this.caption;\r\n  }\r\n\r\n  /**\r\n   * Gets the error code.\r\n   * @returns {number} - The error code.\r\n   */\r\n  getErrorCode(): number {\r\n    return this.errorCode;\r\n  }\r\n\r\n  /**\r\n   * Gets the event index counter.\r\n   * @returns {number} - The event index counter.\r\n   */\r\n  getEventIndex(): number {\r\n    return this.eventIndex;\r\n  }\r\n\r\n  /**\r\n   * Gets the session start time.\r\n   * @returns {number} - The session start time.\r\n   */\r\n  getSessionStartTime(): number {\r\n    return this.sessionStartTime;\r\n  }\r\n\r\n  /**\r\n   * Updates the model.\r\n   * @param {Object} obj - A partial or full updated model.\r\n   * @returns {void}\r\n   */\r\n  updateModel(obj: Object): void {\r\n    Object.assign(this, obj);\r\n  }\r\n\r\n  /**\r\n   * Gets the model for a certain event.\r\n   * @param {KavaEvent} eventObj - The event object.\r\n   * @returns {Object} - The event model.\r\n   */\r\n  getModel(eventObj: KavaEvent): Object {\r\n    return getEventModel(eventObj, this);\r\n  }\r\n}\r\n\r\nexport {KavaModel};\r\n\n\n\n// WEBPACK FOOTER //\n// ./kava-model.js","// @flow\r\nimport {registerPlugin} from 'pakhshkit-js';\r\nimport {Kava} from './kava';\r\n\r\ndeclare var __VERSION__: string;\r\ndeclare var __NAME__: string;\r\n\r\nexport {Kava as Plugin};\r\nexport {__VERSION__ as VERSION, __NAME__ as NAME};\r\n\r\nconst pluginName: string = 'kava';\r\n\r\nregisterPlugin(pluginName, Kava);\r\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","// @flow\r\nimport {BasePlugin, Error as PKError, FakeEvent} from 'pakhshkit-js';\r\nimport {OVPAnalyticsService} from 'pakhshkit-js-providers/dist/pakhshkit-analytics-service';\r\nimport {KavaEventModel} from './kava-event-model';\r\nimport {KavaRateHandler} from './kava-rate-handler';\r\nimport {KavaTimer} from './kava-timer';\r\nimport {KavaModel} from './kava-model';\r\n\r\n/**\r\n * KAVA (Vidiun Advanced Analytics) plugin class.\r\n * @constructor\r\n * @param {string} name - The plugin name.\r\n * @param {Player} player - The player instance.\r\n * @param {Object} config - The plugin config.\r\n */\r\nclass Kava extends BasePlugin {\r\n  _model: KavaModel;\r\n  _timer: KavaTimer;\r\n  _rateHandler: KavaRateHandler;\r\n  _viewEventEnabled: boolean;\r\n  _firstPlayRequestTime: number;\r\n  _bufferStartTime: number;\r\n  _previousCurrentTime: number;\r\n  _isFirstPlay: boolean;\r\n  _isEnded: boolean;\r\n  _isPaused: boolean;\r\n  _isBuffering: boolean;\r\n  _timePercentEvent: {[time: string]: boolean};\r\n  _isPlaying: boolean;\r\n\r\n  /**\r\n   * The default config of the plugin.\r\n   * @type {Object}\r\n   * @static\r\n   */\r\n  static defaultConfig: Object = {\r\n    serviceUrl: '//analytics.vidiun.com/api_v3/index.php',\r\n    viewEventCountdown: 10,\r\n    resetSessionCountdown: 30,\r\n    dvrThreshold: 120,\r\n    playbackContext: '',\r\n    applicationVersion: ''\r\n  };\r\n\r\n  /**\r\n   * Runs the plugin validation logic.\r\n   * @type {Object}\r\n   * @static\r\n   * @return {boolean} - Whether the plugin is valid or not.\r\n   */\r\n  static isValid(): boolean {\r\n    return true;\r\n  }\r\n\r\n  constructor(name: string, player: Player, config: Object) {\r\n    super(name, player, config);\r\n    this._rateHandler = new KavaRateHandler();\r\n    this._model = new KavaModel();\r\n    this._setModelDelegates();\r\n    this._timer = new KavaTimer({\r\n      resetCounter: this.config.resetSessionCountdown,\r\n      eventCounter: this.config.viewEventCountdown\r\n    });\r\n    this._viewEventEnabled = true;\r\n    this._resetFlags();\r\n    this._addBindings();\r\n    this._model.updateModel({\r\n      eventIndex: 1,\r\n      bufferTime: 0.0,\r\n      bufferTimeSum: 0.0,\r\n      playTimeSum: 0.0\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Runs the destroy logic of the plugin.\r\n   * @public\r\n   * @return {void}\r\n   */\r\n  destroy(): void {\r\n    this.eventManager.destroy();\r\n    this._timer.destroy();\r\n    this._rateHandler.destroy();\r\n  }\r\n\r\n  /**\r\n   * Runs the reset logic of the plugin.\r\n   * @public\r\n   * @return {void}\r\n   */\r\n  reset(): void {\r\n    this.eventManager.removeAll();\r\n    this._rateHandler.destroy();\r\n    this._timer.destroy();\r\n    this._resetFlags();\r\n    this._addBindings();\r\n    this._model.updateModel({\r\n      eventIndex: 1,\r\n      bufferTime: 0.0,\r\n      bufferTimeSum: 0.0,\r\n      playTimeSum: 0.0,\r\n      sessionStartTime: null\r\n    });\r\n  }\r\n\r\n  _resetFlags(): void {\r\n    this._previousCurrentTime = 0;\r\n    this._isPlaying = false;\r\n    this._isFirstPlay = true;\r\n    this._isEnded = false;\r\n    this._isPaused = false;\r\n    this._isBuffering = false;\r\n    this._timePercentEvent = {\r\n      PLAY_REACHED_25_PERCENT: false,\r\n      PLAY_REACHED_50_PERCENT: false,\r\n      PLAY_REACHED_75_PERCENT: false,\r\n      PLAY_REACHED_100_PERCENT: false\r\n    };\r\n  }\r\n\r\n  _resetSession(): void {\r\n    this.logger.debug('Reset KAVA session');\r\n    this._rateHandler.reset();\r\n    this._model.updateModel({\r\n      eventIndex: 1,\r\n      bufferTimeSum: 0.0,\r\n      playTimeSum: 0.0\r\n    });\r\n  }\r\n\r\n  _sendAnalytics(eventObj: KavaEvent): void {\r\n    if (!this._validate()) {\r\n      return;\r\n    }\r\n    if (this._isBuffering) {\r\n      this._updateBufferModel();\r\n      this._bufferStartTime = Date.now();\r\n    }\r\n    const model = this._model.getModel(eventObj);\r\n    OVPAnalyticsService.trackEvent(this.config.serviceUrl, model)\r\n      .doHttpRequest()\r\n      .then(\r\n        response => {\r\n          this.logger.debug(`KAVA event sent`, eventObj.type, model);\r\n          this._updateSessionStartTimeModel(response);\r\n        },\r\n        err => {\r\n          this.logger.error(`Failed to send KAVA event`, eventObj.type, model, err);\r\n        }\r\n      );\r\n    this._model.updateModel({eventIndex: this._model.getEventIndex() + 1});\r\n  }\r\n\r\n  _addBindings(): void {\r\n    this.eventManager.listen(this._timer, KavaTimer.Event.TICK, () => this._rateHandler.countCurrent());\r\n    this.eventManager.listen(this._timer, KavaTimer.Event.REPORT, () => this._onReport());\r\n    this.eventManager.listen(this._timer, KavaTimer.Event.RESET, () => this._resetSession());\r\n    this.eventManager.listen(this.player, this.player.Event.SOURCE_SELECTED, () => this._onSourceSelected());\r\n    this.eventManager.listen(this.player, this.player.Event.ERROR, event => this._onError(event));\r\n    this.eventManager.listen(this.player, this.player.Event.FIRST_PLAY, () => this._onFirstPlay());\r\n    this.eventManager.listen(this.player, this.player.Event.TRACKS_CHANGED, () => this._setInitialTracks());\r\n    this.eventManager.listen(this.player, this.player.Event.PLAYING, () => this._onPlaying());\r\n    this.eventManager.listen(this.player, this.player.Event.PLAYBACK_STARTED, () => (this._isPlaying = true));\r\n    this.eventManager.listen(this.player, this.player.Event.SEEKING, () => this._onSeeking());\r\n    this.eventManager.listen(this.player, this.player.Event.PAUSE, () => this._onPause());\r\n    this.eventManager.listen(this.player, this.player.Event.ENDED, () => this._onEnded());\r\n    this.eventManager.listen(this.player, this.player.Event.TIME_UPDATE, () => this._onTimeUpdate());\r\n    this.eventManager.listen(this.player, this.player.Event.VIDEO_TRACK_CHANGED, event => this._onVideoTrackChanged(event));\r\n    this.eventManager.listen(this.player, this.player.Event.AUDIO_TRACK_CHANGED, event => this._onAudioTrackChanged(event));\r\n    this.eventManager.listen(this.player, this.player.Event.TEXT_TRACK_CHANGED, event => this._onTextTrackChanged(event));\r\n    this.eventManager.listen(this.player, this.player.Event.PLAYER_STATE_CHANGED, event => this._onPlayerStateChanged(event));\r\n  }\r\n\r\n  _getRates(): Array<number> {\r\n    const rates = [];\r\n    const videoTracks = this.player.getTracks(this.player.Track.VIDEO);\r\n    videoTracks.forEach(videoTrack => rates.push(videoTrack.bandwidth));\r\n    return rates;\r\n  }\r\n\r\n  _setInitialTracks(): void {\r\n    const rates = this._getRates();\r\n    const activeTracks = this.player.getActiveTracks();\r\n    this._rateHandler.setRates(rates);\r\n    if (activeTracks.video) {\r\n      this._rateHandler.setCurrent(activeTracks.video.bandwidth);\r\n    }\r\n    if (activeTracks.audio) {\r\n      this._model.updateModel({language: activeTracks.audio.language});\r\n    }\r\n    if (activeTracks.text) {\r\n      this._model.updateModel({caption: activeTracks.text.language});\r\n    }\r\n  }\r\n\r\n  _onReport(): void {\r\n    if (this._viewEventEnabled) {\r\n      this._updatePlayTimeSumModel();\r\n      this._sendAnalytics(KavaEventModel.VIEW);\r\n    } else {\r\n      this.logger.warn(`VIEW event blocked because server response of viewEventsEnabled=false`);\r\n    }\r\n    this._model.updateModel({bufferTime: 0});\r\n  }\r\n\r\n  _onPlaying(): void {\r\n    if (this._isFirstPlay) {\r\n      this._timer.start();\r\n      this._isFirstPlay = false;\r\n      this._model.updateModel({\r\n        joinTime: Kava._getTimeDifferenceInSeconds(this._firstPlayRequestTime)\r\n      });\r\n      this._sendAnalytics(KavaEventModel.PLAY);\r\n    } else if (this._isEnded) {\r\n      this._timer.start();\r\n      this._isEnded = false;\r\n      this._sendAnalytics(KavaEventModel.REPLAY);\r\n    } else if (this._isPaused) {\r\n      this._timer.resume();\r\n      this._isPaused = false;\r\n      this._sendAnalytics(KavaEventModel.RESUME);\r\n    }\r\n  }\r\n\r\n  _onFirstPlay(): void {\r\n    this._firstPlayRequestTime = Date.now();\r\n    this._sendAnalytics(KavaEventModel.PLAY_REQUEST);\r\n  }\r\n\r\n  _onSourceSelected(): void {\r\n    this._sendAnalytics(KavaEventModel.IMPRESSION);\r\n  }\r\n\r\n  _onSeeking(): void {\r\n    this._previousCurrentTime = this.player.currentTime;\r\n    this._model.updateModel({targetPosition: this.player.currentTime});\r\n    this._sendAnalytics(KavaEventModel.SEEK);\r\n  }\r\n\r\n  _onPause(): void {\r\n    this._isPaused = true;\r\n    this._timer.stop();\r\n    this._sendAnalytics(KavaEventModel.PAUSE);\r\n  }\r\n\r\n  _onEnded(): void {\r\n    this._isEnded = true;\r\n    this._onTimeUpdate();\r\n    this._model.updateModel({bufferTime: 0});\r\n  }\r\n\r\n  _onTimeUpdate(): void {\r\n    if (!this.player.isLive()) {\r\n      this._updatePlayTimeSumModel();\r\n      const percent = this.player.currentTime / this.player.duration;\r\n      if (!this._timePercentEvent.PLAY_REACHED_25 && percent >= 0.25) {\r\n        this._timePercentEvent.PLAY_REACHED_25 = true;\r\n        this._sendAnalytics(KavaEventModel.PLAY_REACHED_25_PERCENT);\r\n      }\r\n      if (!this._timePercentEvent.PLAY_REACHED_50 && percent >= 0.5) {\r\n        this._timePercentEvent.PLAY_REACHED_50 = true;\r\n        this._sendAnalytics(KavaEventModel.PLAY_REACHED_50_PERCENT);\r\n      }\r\n      if (!this._timePercentEvent.PLAY_REACHED_75 && percent >= 0.75) {\r\n        this._timePercentEvent.PLAY_REACHED_75 = true;\r\n        this._sendAnalytics(KavaEventModel.PLAY_REACHED_75_PERCENT);\r\n      }\r\n      if (!this._timePercentEvent.PLAY_REACHED_100 && percent === 1) {\r\n        this._timePercentEvent.PLAY_REACHED_100 = true;\r\n        this._sendAnalytics(KavaEventModel.PLAY_REACHED_100_PERCENT);\r\n      }\r\n    }\r\n  }\r\n\r\n  _onVideoTrackChanged(event: FakeEvent): void {\r\n    const videoTrack = event.payload.selectedVideoTrack;\r\n    this._rateHandler.setCurrent(videoTrack.bandwidth);\r\n    if (this.player.isAdaptiveBitrateEnabled()) {\r\n      this._sendAnalytics(KavaEventModel.FLAVOR_SWITCH);\r\n    } else {\r\n      this._sendAnalytics(KavaEventModel.SOURCE_SELECTED);\r\n    }\r\n  }\r\n\r\n  _onAudioTrackChanged(event: FakeEvent): void {\r\n    const audioTrack = event.payload.selectedAudioTrack;\r\n    this._model.updateModel({language: audioTrack.language});\r\n    this._sendAnalytics(KavaEventModel.AUDIO_SELECTED);\r\n  }\r\n\r\n  _onTextTrackChanged(event: FakeEvent): void {\r\n    if (this._isPlaying) {\r\n      const textTrack = event.payload.selectedTextTrack;\r\n      this._model.updateModel({caption: textTrack.language});\r\n      this._sendAnalytics(KavaEventModel.CAPTIONS);\r\n    }\r\n  }\r\n\r\n  _onError(event: FakeEvent): void {\r\n    if (event.payload && event.payload.severity === PKError.Severity.CRITICAL) {\r\n      this._model.updateModel({errorCode: event.payload.code});\r\n      this._sendAnalytics(KavaEventModel.ERROR);\r\n      this.reset();\r\n    }\r\n  }\r\n\r\n  _onPlayerStateChanged(event: FakeEvent): void {\r\n    const oldState = event.payload.oldState;\r\n    const newState = event.payload.newState;\r\n    if (oldState.type === this.player.State.BUFFERING) {\r\n      this._isBuffering = false;\r\n      this._updateBufferModel();\r\n    }\r\n    if (newState.type === this.player.State.BUFFERING) {\r\n      this._isBuffering = true;\r\n      this._bufferStartTime = Date.now();\r\n    }\r\n  }\r\n\r\n  _updateSessionStartTimeModel(response: Object | number): void {\r\n    if (!this._model.getSessionStartTime() && response) {\r\n      if (typeof response === 'object') {\r\n        this._model.updateModel({sessionStartTime: response.time});\r\n        this._viewEventEnabled = response.viewEventsEnabled;\r\n      } else {\r\n        this._model.updateModel({sessionStartTime: response});\r\n      }\r\n    }\r\n    if (this._timer.isStopped()) {\r\n      this._model.updateModel({sessionStartTime: null});\r\n    }\r\n  }\r\n\r\n  _updateBufferModel(): void {\r\n    const duration = Kava._getTimeDifferenceInSeconds(this._bufferStartTime);\r\n    this._model.updateModel({\r\n      bufferTime: this._model.getBufferTime() + duration,\r\n      bufferTimeSum: this._model.getBufferTimeSum() + duration\r\n    });\r\n  }\r\n\r\n  _updatePlayTimeSumModel(): void {\r\n    let delta;\r\n    if (this.player.isLive()) {\r\n      delta = this.config.viewEventCountdown - this._model.getBufferTime();\r\n    } else {\r\n      delta = this.player.currentTime - this._previousCurrentTime;\r\n      this._previousCurrentTime = this.player.currentTime;\r\n    }\r\n    this._model.updateModel({playTimeSum: this._model.getPlayTimeSum() + delta});\r\n  }\r\n\r\n  _setModelDelegates() {\r\n    this._model.getActualBitrate = () => this._rateHandler.getCurrent();\r\n    this._model.getAverageBitrate = () => this._rateHandler.getAverage();\r\n    this._model.getPartnerId = () => this.config.partnerId;\r\n    this._model.getEntryId = () => this.config.entryId;\r\n    this._model.getSessionId = () => this.config.sessionId;\r\n    this._model.getClientVer = () => this.config.playerVersion;\r\n    this._model.getClientTag = () => 'html5:v' + this.config.playerVersion;\r\n    this._model.getVS = () => this.config.vs;\r\n    this._model.getUIConfId = () => this.config.uiConfId;\r\n    this._model.getReferrer = () => btoa(this.config.referrer);\r\n    this._model.getCustomVar1 = () => this.config.customVar1;\r\n    this._model.getCustomVar2 = () => this.config.customVar2;\r\n    this._model.getCustomVar3 = () => this.config.customVar3;\r\n    this._model.getPosition = () => this._getPosition();\r\n    this._model.getDeliveryType = () => this._getDeliveryType();\r\n    this._model.getPlaybackType = () => this._getPlaybackType();\r\n    this._model.getPlaybackContext = () => this.config.playbackContext;\r\n    this._model.getApplicationVersion = () => this.config.applicationVersion;\r\n  }\r\n\r\n  _getPosition(): number {\r\n    if (this.player.isLive()) {\r\n      if (!Number.isNaN(this.player.duration)) {\r\n        if (this.player.duration - this.player.currentTime < 1) {\r\n          return 0;\r\n        }\r\n        return -(this.player.duration - this.player.currentTime);\r\n      }\r\n      return 0;\r\n    }\r\n    return this.player.currentTime;\r\n  }\r\n\r\n  _getDeliveryType(): string {\r\n    if (this.player.streamType === this.player.StreamType.PROGRESSIVE) {\r\n      return 'url';\r\n    }\r\n    return this.player.streamType;\r\n  }\r\n\r\n  _getPlaybackType(): string {\r\n    if (this.player.isLive()) {\r\n      if (this.player.isDvr()) {\r\n        const distanceFromLiveEdge = this.player.duration - this.player.currentTime;\r\n        if (distanceFromLiveEdge >= this.config.dvrThreshold) {\r\n          return 'dvr';\r\n        }\r\n      }\r\n      return 'live';\r\n    }\r\n    return 'vod';\r\n  }\r\n\r\n  _validate(): boolean {\r\n    if (!this.config.partnerId) {\r\n      Kava._logMissingParam('partnerId');\r\n      return false;\r\n    }\r\n    if (!this.config.entryId) {\r\n      Kava._logMissingParam('entryId');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  static _getTimeDifferenceInSeconds(time): number {\r\n    return (Date.now() - time) / 1000.0;\r\n  }\r\n\r\n  static _logMissingParam(missingParam: string): void {\r\n    this.logger.warn(`Kava analytics block report because of missing param ${missingParam}`);\r\n  }\r\n}\r\n\r\nexport {Kava};\r\n\n\n\n// WEBPACK FOOTER //\n// ./kava.js","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.analytics=t():(e.pakhshkit=e.pakhshkit||{},e.pakhshkit.services=e.pakhshkit.services||{},e.pakhshkit.services.analytics=t())}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=19)}([function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(2),u=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;n(this,e),this._attemptCounter=1,this.headers=t}return o(e,[{key:\"getUrl\",value:function(e){return e+\"/service/\"+this.service+(this.action?\"/action/\"+this.action:\"\")}},{key:\"doHttpRequest\",value:function(){var e=this,t=new Promise(function(t,r){e._requestPromise={resolve:t,reject:r}});return this.url||this._requestPromise.reject(new u.default(u.default.Severity.CRITICAL,u.default.Category.NETWORK,u.default.Code.MALFORMED_DATA_URI,{url:this.url})),this._createXHR(),t}},{key:\"_createXHR\",value:function(){var e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status)try{var r=JSON.parse(t.responseText);return e.responseHeaders=e._getResponseHeaders(t),e._requestPromise.resolve(r)}catch(r){e._requestPromise.reject(e._createError(t,u.default.Code.BAD_SERVER_RESPONSE,{text:t.responseText}))}},t.open(this.method,this.url,this.retryConfig.async),this.retryConfig.async&&this.retryConfig.timeout&&(t.timeout=this.retryConfig.timeout);var r=performance.now();t.ontimeout=function(){e._handleError(t,u.default.Code.TIMEOUT,{timeout:(performance.now()-r)/1e3,statusText:t.statusText})},t.onerror=t.onabort=function(){e._handleError(t,u.default.Code.HTTP_ERROR,{text:t.responseText,statusText:t.statusText})},this.headers.forEach(function(e,r){t.setRequestHeader(r,e)}),t.send(this.params)}},{key:\"_getResponseHeaders\",value:function(e){return e.getAllResponseHeaders().split(\"\\n\").filter(function(e){return 0===e.toLowerCase().indexOf(\"x-\")})}},{key:\"_handleError\",value:function(e,t,r){var n=this._createError(e,t,r);if(e.onreadystatechange=function(){},e.onerror=function(){},e.ontimeout=function(){},e.onabort=function(){},!(this.retryConfig.maxAttempts&&this._attemptCounter<this.retryConfig.maxAttempts))return this._requestPromise.reject(n);this._attemptCounter++,this._createXHR()}},{key:\"_createError\",value:function(e,t,r){return Object.assign(r,{url:this.url,headers:this._getResponseHeaders(e),attempt:this._attemptCounter}),new u.default(u.default.Severity.CRITICAL,u.default.Category.NETWORK,t,r)}}]),e}();t.default=a},function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0}),t.OVPConfiguration=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(4),u={serviceUrl:\"https://cdnapisec.vidiun.com/api_v3\",cdnUrl:\"https://cdnapisec.vidiun.com\",serviceParams:{apiVersion:\"3.3.0\",format:1},useApiCaptions:!0},a=function(){function e(){n(this,e)}return o(e,null,[{key:\"set\",value:function(e){e&&Object.assign(u,e)}},{key:\"get\",value:function(){return(0,i.clone)(u)}}]),e}();t.default=a,t.OVPConfiguration=a},function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(3),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=r(7),a=r(6),s=r(5),c=function e(t,r,i){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,e),this.severity=t,this.category=r,this.code=i,this.data=u,(0,o.getLogLevel)(\"Error\")!==o.LogLevel.OFF&&e._logger.error(\"Category:\"+r+\" | Code:\"+i+\" |\",u)};c.Severity=u.Severity,c.Category=s.Category,c.Code=a.Code,c._logger=(0,i.default)(\"Error\"),t.default=c},function(e,t,r){\"use strict\";function n(e){return e?a.get(e):a}function o(e){return n(e).getLevel()}function i(e,t){n(t).setLevel(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var u=r(10),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),s={DEBUG:a.DEBUG,INFO:a.INFO,TIME:a.TIME,WARN:a.WARN,ERROR:a.ERROR,OFF:a.OFF};a.useDefaults({defaultLevel:a.ERROR}),t.default=n,t.LogLevel=s,t.getLogLevel=o,t.setLogLevel=i},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=function e(t){var r=void 0;return Array.isArray(t)?(r=t.length>0?t.slice(0):[],r.forEach(function(t,o){(\"object\"===(void 0===t?\"undefined\":n(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(r[o]=e(t))})):\"object\"===(void 0===t?\"undefined\":n(t))?(r=Object.assign({},t),Object.keys(r).forEach(function(t){(\"object\"===n(r[t])&&r[t]!=={}||Array.isArray(r[t])&&r[t].length>0)&&(r[t]=e(r[t]))})):r=t,r};t.clone=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n={NETWORK:1,SERVICE:2,PROVIDER:3};t.Category=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,BAD_SERVER_RESPONSE:1005,MULTIREQUEST_API_ERROR:1006,API_RESPONSE_MISMATCH:1007,ERROR:2e3,BLOCK_ACTION:2001,MISSING_MANDATORY_PARAMS:3e3,MISSING_PLAY_SOURCE:3001};t.Code=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n={RECOVERABLE:1,CRITICAL:2};t.Severity=n},function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function e(t){n(this,e),this.hasError=!1,\"VidiunAPIException\"===t.objectType?(this.hasError=!0,this.error=new i(t.code,t.message)):t.error&&\"VidiunAPIException\"===t.error.objectType?(this.hasError=!0,this.error=new i(t.error.code,t.error.message)):this.data=t};t.default=o;var i=function e(t,r){n(this,e),this.code=t,this.message=r}},function(e,t,r){\"use strict\";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function u(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.MultiRequestResult=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),l=n(c),f=r(3),d=n(f),p=r(8),v=n(p),y=r(2),h=n(y),g=function(e){function t(){var e,r,n,o;i(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return r=n=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.requests=[],o=r,u(n,o)}return a(t,e),s(t,[{key:\"add\",value:function(e){this.requests.push(e);var t={},r={service:e.service,action:e.action};return Object.assign(t,o({},this.requests.length,Object.assign(r,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:\"execute\",value:function(){var e=this;return new Promise(function(r,n){try{e.params=JSON.stringify(e.params)}catch(r){t._logger.error(\"\"+r.message),n(new h.default(h.default.Severity.CRITICAL,h.default.Category.PROVIDER,h.default.Code.FAILED_PARSING_REQUEST,{error:r,params:e.params}))}e.doHttpRequest().then(function(t){var o=new b(t);o.success?r({headers:e.responseHeaders,response:o}):n(new h.default(h.default.Severity.CRITICAL,h.default.Category.NETWORK,h.default.Code.MULTIREQUEST_API_ERROR,{url:e.url,headers:e.responseHeaders,results:o.results}))},function(e){n(e)})})}}]),t}(l.default);g._logger=(0,d.default)(\"MultiRequestBuilder\"),t.default=g;var b=t.MultiRequestResult=function e(t){var r=this;i(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var n=new v.default(t);if(r.results.push(n),n.hasError)return e._logger.error(\"Service returned an error with error code: \"+n.error.code+\" and message: \"+n.error.message+\".\"),void(r.success=!1)})};b._logger=(0,d.default)(\"MultiRequestResult\")},function(e,t,r){var n,o;/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */\n!function(i){\"use strict\";var u={};u.VERSION=\"1.4.1\";var a,s={},c=function(e,t){return function(){return t.apply(e,arguments)}},l=function(){var e,t,r=arguments,n=r[0];for(t=1;t<r.length;t++)for(e in r[t])e in n||!r[t].hasOwnProperty(e)||(n[e]=r[t][e]);return n},f=function(e,t){return{value:e,name:t}};u.DEBUG=f(1,\"DEBUG\"),u.INFO=f(2,\"INFO\"),u.TIME=f(3,\"TIME\"),u.WARN=f(4,\"WARN\"),u.ERROR=f(8,\"ERROR\"),u.OFF=f(99,\"OFF\");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&\"value\"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(u.DEBUG,arguments)},info:function(){this.invoke(u.INFO,arguments)},warn:function(){this.invoke(u.WARN,arguments)},error:function(){this.invoke(u.ERROR,arguments)},time:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(u.TIME,[e,\"start\"])},timeEnd:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(u.TIME,[e,\"end\"])},invoke:function(e,t){a&&this.enabledFor(e)&&a(t,l({level:e},this.context))}};var p=new d({filterLevel:u.OFF});!function(){var e=u;e.enabledFor=c(p,p.enabledFor),e.debug=c(p,p.debug),e.time=c(p,p.time),e.timeEnd=c(p,p.timeEnd),e.info=c(p,p.info),e.warn=c(p,p.warn),e.error=c(p,p.error),e.log=e.info}(),u.setHandler=function(e){a=e},u.setLevel=function(e){p.setLevel(e);for(var t in s)s.hasOwnProperty(t)&&s[t].setLevel(e)},u.getLevel=function(){return p.getLevel()},u.get=function(e){return s[e]||(s[e]=new d(l({name:e},p.context)))},u.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift(\"[\"+t.name+\"]\")};var t={},r=function(e,t){Function.prototype.apply.call(e,console,t)};return\"undefined\"==typeof console?function(){}:function(n,o){n=Array.prototype.slice.call(n);var i,a=console.log;o.level===u.TIME?(i=(o.name?\"[\"+o.name+\"] \":\"\")+n[0],\"start\"===n[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):r(a,[i+\": \"+((new Date).getTime()-t[i])+\"ms\"])):(o.level===u.WARN&&console.warn?a=console.warn:o.level===u.ERROR&&console.error?a=console.error:o.level===u.INFO&&console.info?a=console.info:o.level===u.DEBUG&&console.debug&&(a=console.debug),e.formatter(n,o),r(a,n))}},u.useDefaults=function(e){u.setLevel(e&&e.defaultLevel||u.DEBUG),u.setHandler(u.createDefaultHandler(e))},n=u,void 0!==(o=\"function\"==typeof n?n.call(t,r,t,e):n)&&(e.exports=o)}()},,function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=function(e){var t=[],r=/\\[\\]$/,o=function(e){return\"[object Array]\"===Object.prototype.toString.call(e)},i=function(e,r){r=\"function\"==typeof r?r():null===r?\"\":void 0===r?\"\":r,t[t.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(r)};return function e(u,a){var s=void 0,c=void 0,l=void 0;if(u)if(o(a))for(s=0,c=a.length;s<c;s++)r.test(u)?i(u,a[s]):e(u+\":\"+(\"object\"===n(a[s])?s:\"\"),a[s]);else if(a&&\"[object Object]\"===String(a))for(l in a)e(u+\":\"+l,a[l]);else i(u,a);else if(o(a))for(s=0,c=a.length;s<c;s++)i(a[s].name,a[s].value);else for(l in a)e(l,a[l]);return t}(\"\",e).join(\"&\").replace(/%20/g,\"+\")};t.param=o},function(e,t,r){\"use strict\";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(9),a=n(u),s=r(1),c=n(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:\"getMultiRequest\",value:function(e,t,r){var n=c.default.get(),o=n.serviceParams;Object.assign(o,{vs:t,clientTag:\"html5:v\"+e}),r&&Object.assign(o,{partnerId:r});var i=new Map;i.set(\"Content-Type\",\"application/json\");var u=new a.default(i);return u.method=\"POST\",u.service=\"multirequest\",u.url=u.getUrl(n.serviceUrl),u.params=o,u}}]),e}();t.default=l},,function(e,t,r){\"use strict\";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(13),c=n(s),l=r(0),f=n(l),d=r(1),p=n(d),v=r(12),y=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,null,[{key:\"trackEvent\",value:function(e,t){var r=p.default.get(),n={};Object.assign(n,r.serviceParams,t);var o=new f.default;return o.service=\"analytics\",o.action=\"trackEvent\",o.method=\"GET\",o.tag=\"analytics-trackEvent\",o.params=n,o.url=e+\"?service=\"+o.service+\"&action=\"+o.action+\"&\"+(0,v.param)(o.params),o}}]),t}(c.default);t.default=y},,,,function(e,t,r){\"use strict\";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.VERSION=t.NAME=t.RequestBuilder=t.OVPConfiguration=t.OVPAnalyticsService=void 0;var o=r(0),i=n(o),u=r(1),a=n(u),s=r(15),c=n(s);t.OVPAnalyticsService=c.default,t.OVPConfiguration=a.default,t.RequestBuilder=i.default,t.NAME=\"pakhshkit-js-providers-analytics-service\",t.VERSION=\"2.18.1\"}])});\n//# sourceMappingURL=pakhshkit-analytics-service.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/pakhshkit-js-providers/dist/pakhshkit-analytics-service.js\n// module id = 5\n// module chunks = 0","// @flow\r\n\r\n/**\r\n * Manage the video rates for the KAVA plugin.\r\n * @constructor\r\n */\r\nclass KavaRateHandler {\r\n  _rates: Array<Object> = [];\r\n\r\n  constructor() {\r\n    this._rates = [];\r\n  }\r\n\r\n  /**\r\n   * Sets the video rates.\r\n   * @param {Array<number>} rates - The video rates.\r\n   * @public\r\n   * @returns {void}\r\n   */\r\n  setRates(rates: Array<number>): void {\r\n    this._rates = [];\r\n    rates.forEach(rate => {\r\n      this._rates.push({\r\n        rate: rate,\r\n        active: false,\r\n        duration: 0\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Sets the current rate.\r\n   * @param {number} rate - The current rate.\r\n   * @public\r\n   * @returns {void}\r\n   */\r\n  setCurrent(rate: number): void {\r\n    this._rates.forEach(o => (o.active = false));\r\n    const obj = this._rates.find(o => o.rate === rate);\r\n    if (obj) {\r\n      obj.active = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets the current rate.\r\n   * @public\r\n   * @returns {number} - The current rate.\r\n   */\r\n  getCurrent(): number {\r\n    const current = this._rates.find(o => o.active);\r\n    return current ? current.rate : -1;\r\n  }\r\n\r\n  /**\r\n   * Increases the duration of the current rate.\r\n   * @public\r\n   * @returns {void}\r\n   */\r\n  countCurrent(): void {\r\n    const current = this._rates.find(o => o.active);\r\n    if (current) {\r\n      current.duration++;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets the average rate.\r\n   * @public\r\n   * @returns {number} - The average rate.\r\n   */\r\n  getAverage(): number {\r\n    let totalDuration = 0;\r\n    let sum = 0;\r\n    this._rates.forEach(o => {\r\n      sum += o.rate * o.duration;\r\n      totalDuration += o.duration;\r\n    });\r\n    return totalDuration ? sum / totalDuration : 0;\r\n  }\r\n\r\n  /**\r\n   * Resets the duration of all rates.\r\n   * @public\r\n   * @returns {void}\r\n   */\r\n  reset(): void {\r\n    this._rates.forEach(o => (o.duration = 0));\r\n  }\r\n\r\n  /**\r\n   * Destroys the class.\r\n   * @public\r\n   * @returns {void}\r\n   */\r\n  destroy(): void {\r\n    this._rates = [];\r\n  }\r\n}\r\n\r\nexport {KavaRateHandler};\r\n\n\n\n// WEBPACK FOOTER //\n// ./kava-rate-handler.js","// @flow\r\nimport {FakeEvent, FakeEventTarget} from 'pakhshkit-js';\r\n\r\nconst SECOND: number = 1000;\r\n\r\n/**\r\n * Mange a timer and dispatches related events.\r\n * @constructor\r\n * @param {Object} config - The timer config.\r\n */\r\nclass KavaTimer extends FakeEventTarget {\r\n  _resetCounter: number;\r\n  _eventCounter: number;\r\n  _intervalId: ?number;\r\n  _stopped: boolean;\r\n  _config: Object;\r\n\r\n  static Event = {\r\n    TICK: 'tick',\r\n    RESET: 'reset',\r\n    REPORT: 'report'\r\n  };\r\n\r\n  constructor(config: Object) {\r\n    super();\r\n    this._config = config;\r\n  }\r\n\r\n  /**\r\n   * Starts the timer interval.\r\n   * @public\r\n   * @returns {void}\r\n   */\r\n  start(): void {\r\n    this._clearTimeout();\r\n    this._stopped = false;\r\n    this._resetCounter = 0;\r\n    this._eventCounter = 0;\r\n    this._intervalId = setInterval(() => this._monitor(), SECOND);\r\n  }\r\n\r\n  /**\r\n   * Continues the timer to dispatch REPORT.\r\n   * @public\r\n   * @returns {void}\r\n   */\r\n  resume(): void {\r\n    this._stopped = false;\r\n    this._resetCounter = 0;\r\n  }\r\n\r\n  /**\r\n   * Stops the timer from dispatch REPORT and starts the timer to dispatch RESET.\r\n   * @public\r\n   * @returns {void}\r\n   */\r\n  stop(): void {\r\n    this._stopped = true;\r\n  }\r\n\r\n  /**\r\n   * @public\r\n   * @returns {boolean} - Whether the timer is stopped.\r\n   */\r\n  isStopped(): boolean {\r\n    return this._stopped;\r\n  }\r\n\r\n  /**\r\n   * Destroys the timer.\r\n   * @public\r\n   * @returns {void}\r\n   */\r\n  destroy(): void {\r\n    this._clearTimeout();\r\n  }\r\n\r\n  _clearTimeout(): void {\r\n    if (this._intervalId) {\r\n      clearInterval(this._intervalId);\r\n      this._intervalId = null;\r\n    }\r\n  }\r\n\r\n  _monitor(): void {\r\n    if (this._stopped) {\r\n      if (this._resetCounter === this._config.resetCounter) {\r\n        this.dispatchEvent(new FakeEvent(KavaTimer.Event.RESET));\r\n        this._resetCounter = 0;\r\n        this._eventCounter = 0;\r\n      }\r\n      this._resetCounter++;\r\n    } else {\r\n      this.dispatchEvent(new FakeEvent(KavaTimer.Event.TICK));\r\n      if (this._eventCounter === this._config.eventCounter) {\r\n        this.dispatchEvent(new FakeEvent(KavaTimer.Event.REPORT));\r\n        this._eventCounter = 0;\r\n      }\r\n      this._eventCounter++;\r\n    }\r\n  }\r\n}\r\n\r\nexport {KavaTimer};\r\n\n\n\n// WEBPACK FOOTER //\n// ./kava-timer.js"],"sourceRoot":""}